<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/result.css" rel="stylesheet">
    <link href="../fontawesome/web-fonts-with-css/css/fontawesome-all.min.css" rel="stylesheet">
    <title>文件上传测试（JS验证实例）</title>
    <script type="text/javascript">
       function checkFile() {
            var file = document.getElementsByName('upfile')[0].value;
            if (file == null || file == "") {
                alert("你还没有选择任何文件，不能上传!");
                return false;
            }
            //定义允许上传的文件类型
            var allow_ext = ".jpg|.jpeg|.png|.gif|.bmp|";
            //提取上传文件的类型
            var ext_name = file.substring(file.lastIndexOf("."));
            //alert(ext_name);
            //alert(ext_name + "|");
            //判断上传文件类型是否允许上传
            if (allow_ext.indexOf(ext_name + "|") == -1) {
                var errMsg = "该文件不允许上传，请上传" + allow_ext + "类型的文件，当前文件类型为：" +     ext_name;
                alert(errMsg);
                return false;
            }
        }
    </script>
<body>
<a href='../index.html' style='position:absolute;top:20px;left:20px;text-decoration:none;color:white;'><i class='fas fa-home' style='font-size:20px;'></i>&#160Home</a>
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<h1>文件上传测试（JS验证实例）</h1>
<form action="5.php" method="POST" enctype="multipart/form-data" name="upload" onsubmit="return     checkFile()">
    <input type="hidden" name="MAX_FILE_SIZE" value="204800"/>
    <p>请选择要上传的文件：<input type="file" name="upfile"/></p>
    <input type="submit" name="submit" value="上传"/>&#160<i class='fas fa-upload'></i>
</form>
<button onclick="help()" style="background-color:transparent;border:none;">
	<i class='far fa-question-circle' style='font-size:15px;color:red;'></i><span style='color:red;'>帮助</span>
</button>
<div style='position: absolute;top:100px;left:20px;'>
    <div class="dropdown">
        <button class="btn btn-outline-dark dropdown-toggle" style="font-size:20px;" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            关卡列表
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a href="1.html" class="dropdown-item" style="color:green;">文件上传测试(无验证)</a>
            <a href="2.html" class="dropdown-item" style='color:green;'>文件上传测试(文件头content-type字段校验)</a>
            <a href="3.html" class="dropdown-item" style="color:green;">文件上传测试(服务端检测文件头)</a>
            <a href="4.html" class="dropdown-item" style="color:green;">文件上传测试(服务端文件扩展名检测)</a>
            <a href="5.html" class="dropdown-item" style="color:gray;">文件上传测试(JS验证实例)</a>
        </div>
    </div>
</div>
<script src="../jquery.js"></script>
<script src="../bootstrap/js/bootstrap.bundle.min.js"></script>
<script>

    function help(){
        alert("绕过方法:方法1:通过firefox的F12修改js代码绕过验证   方法2:使用burp抓包直接提交,绕过js验证");
    }
				
</script>
</body>
</html>

